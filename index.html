<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EM Trip Calculator ‚Äî –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>

  <!-- –®—Ä–∏—Ñ—Ç -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="app">
    <aside class="panel controls">
      <div class="panel-head">
        <h1>EM Trip Calculator</h1>
        <div class="panel-actions">
          <button id="themeBtn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">üåó</button>
          <button id="helpBtn" class="ghost">‚ùî</button>
        </div>
      </div>

      <p class="muted">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —É—Å–∏–ª–∏—è —è–∫–æ—Ä—è –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–º–∞–≥–Ω–∏—Ç–Ω–æ–≥–æ —Ä–∞—Å—Ü–µ–ø–∏—Ç–µ–ª—è. –°—Ä–∞–≤–Ω–∏ –º–µ—Ç–æ–¥—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ.</p>

      <div class="section">
        <label>–ü—Ä–µ—Å–µ—Ç—ã
          <select id="presetSelect">
            <option value="custom">‚Äî Custom ‚Äî</option>
            <option value="soviet">Soviet-style</option>
            <option value="modern">Modern compact</option>
            <option value="high_gap">Large gap (test)</option>
          </select>
        </label>

        <div class="grid-2">
          <label data-tip="–ß–∏—Å–ª–æ –≤–∏—Ç–∫–æ–≤ (N). –î–ª—è —à–∏–Ω—ã –æ–±—ã—á–Ω–æ 1 ‚Äî –Ω–æ —É –∫–∞—Ç—É—à–µ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ.">N
            <input id="turns" type="number" min="1" value="1">
          </label>

          <label data-tip="–ú–∞—Ç–µ—Ä–∏–∞–ª —Å–µ—Ä–¥–µ—á–Ω–∏–∫–∞ ‚Äî –≤–ª–∏—è–µ—Ç mu_r.">–ú–∞—Ç–µ—Ä–∏–∞–ª
            <select id="material">
              <option value="steel">–≠–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–ª—å (mu_r‚âà4000)</option>
              <option value="iron">–ú—è–≥–∫–æ–µ –∂–µ–ª–µ–∑–æ (mu_r‚âà1000)</option>
              <option value="ferrite">–§–µ—Ä—Ä–∏—Ç (mu_r‚âà200)</option>
              <option value="air">–í–æ–∑–¥—É—Ö (mu_r=1)</option>
            </select>
          </label>
        </div>

        <label data-tip="–¢–µ–∫—É—â–∏–π/–∏—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫ (A).">–¢–æ–∫, A
          <input id="iRange" type="range" min="0" max="5000" step="1" value="500">
        </label>
        <div class="row">
          <input id="iNumber" type="number" min="0" max="5000" step="1" value="500" class="num">
          <button id="autoBtn" class="ghost">–ê–≤—Ç–æ</button>
        </div>

        <div class="grid-2">
          <label data-tip="–°–µ—á–µ–Ω–∏–µ —à–∏–Ω—ã (–º–º¬≤).">–°–µ—á–µ–Ω–∏–µ, –º–º¬≤
            <input id="area" type="number" min="1" value="120">
          </label>

          <label data-tip="–ó–∞–∑–æ—Ä –º–µ–∂–¥—É —Å–µ—Ä–¥–µ—á–Ω–∏–∫–æ–º –∏ —è–∫–æ—Ä–µ–º (–º–º).">–ó–∞–∑–æ—Ä, –º–º
            <input id="gap" type="number" min="0.01" step="0.01" value="0.5">
          </label>
        </div>

        <div class="grid-2">
          <label data-tip="–•–æ–¥ —è–∫–æ—Ä—è –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è (–º–º).">–•–æ–¥, –º–º
            <input id="stroke" type="number" min="0.1" step="0.1" value="2">
          </label>

          <label data-tip="–î–ª–∏–Ω–∞ –º–∞–≥–Ω–∏—Ç–Ω–æ–≥–æ –ø—É—Ç–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–¥–µ—á–Ω–∏–∫ (–º–º).">–î–ª–∏–Ω–∞ –ø—É—Ç–∏, –º–º
            <input id="coreLen" type="number" min="1" step="1" value="50">
          </label>
        </div>

        <div class="grid-2">
          <label data-tip="–ñ—ë—Å—Ç–∫–æ—Å—Ç—å –ø—Ä—É–∂–∏–Ω—ã k (–ù/–º).">k, –ù/–º
            <input id="k" type="number" min="1" step="100" value="25000">
          </label>

          <label data-tip="–ü—Ä–µ–¥–Ω–∞—Ç—è–≥ –ø—Ä—É–∂–∏–Ω—ã (–ù).">–ü—Ä–µ–¥–Ω–∞—Ç—è–≥, –ù
            <input id="preload" type="number" min="0" step="1" value="80">
          </label>
        </div>

        <div class="controls-row">
          <button id="calcBtn">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
          <button id="exportCsv" class="ghost">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
          <button id="exportPng" class="ghost">–≠–∫—Å–ø–æ—Ä—Ç PNG</button>
        </div>

        <div class="preset-actions">
          <input id="presetName" placeholder="–ò–º—è –ø—Ä–µ—Å–µ—Ç–∞ (–¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)" />
          <button id="savePreset" class="ghost">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–µ—Å–µ—Ç</button>
          <button id="loadPresets" class="ghost">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞–º–∏</button>
        </div>

      </div>
      <div class="small muted">–ù–∞—á–Ω–∏ —Å –ø—Ä–µ—Å–µ—Ç–∞, –ø–æ—Ç–æ–º –∏–∑–º–µ–Ω—è–π –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —Ç–∞–∫ –ª–µ–≥—á–µ –ø–æ–Ω—è—Ç—å –≤–ª–∏—è–Ω–∏–µ.</div>
    </aside>

    <main class="panel main">
      <div class="main-head">
        <div>
          <h2>–£—Å–∏–ª–∏–µ —è–∫–æ—Ä—è vs —Ç–æ–∫</h2>
          <div class="muted small">–ü–æ–∫–∞–∑–∞–Ω—ã 3 –º–µ—Ç–æ–¥–∞: —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π, —ç–Ω–µ—Ä–≥–∏—è/–º–∞–≥.—Ü–µ–ø—å, —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π. –ü—É–Ω–∫—Ç–∏—Ä ‚Äî —Å–∏–ª–∞ –ø—Ä—É–∂–∏–Ω—ã.</div>
        </div>
        <div class="status">
          <div>–¢–µ–∫—É—â–∏–π —Ç–æ–∫: <b id="iCur">500 A</b></div>
          <div>–¢–æ–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è: <b id="tripValues">‚Äî / ‚Äî / ‚Äî A</b></div>
        </div>
      </div>

      <section class="chart-wrap">
        <canvas id="forceChart"></canvas>
      </section>

      <section class="info-row">
        <div class="card">
          <h3>–ú–∞–≥–Ω–∏—Ç–Ω–∞—è —Ü–µ–ø—å</h3>
          <pre id="magOut">‚Äî</pre>
        </div>
        <div class="card">
          <h3>–¢–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è</h3>
          <pre id="valOut">‚Äî</pre>
        </div>
      </section>

      <section class="visual card">
        <h3>–°—Ö–µ–º–∞</h3>
        <svg id="vis" viewBox="0 0 800 160" preserveAspectRatio="xMidYMid meet">
          <rect x="20" y="20" width="760" height="120" rx="10" fill="#071427" />
          <rect id="coreLeft" x="80" y="40" width="140" height="80" rx="6" fill="#0b1220" stroke="#0ea5a4" stroke-width="2" />
          <rect id="gapRect" x="220" y="60" width="16" height="40" rx="4" fill="#071427" stroke="#94a3b8" stroke-dasharray="3 3" />
          <rect id="arm" x="240" y="48" width="120" height="64" rx="6" fill="#0b1220" stroke="#e6eef6" stroke-width="1" />
        </svg>
      </section>
    </main>
  </div>

  <footer class="footer">EM Trip Calculator ‚Äî MIT ‚Äî —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤</footer>

  <!-- –ú–æ–¥–∞–ª: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è / Preset Manager -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-body">
      <button id="modalClose" class="modal-close">‚úï</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- Tooltip -->
  <div id="tooltip" class="tooltip" role="tooltip"></div>

  <script src="script.js"></script>
</body>
</html>
